#+HTML: <h1 align="center">rofi-borg</h1>
#+HTML: <p align="center"><img src="demo.gif"/></p>
#+HTML: <p align="center"><code>rofi-borg</code> is a GUI wrapper script for <a href="https://www.borgbackup.org/">borg backup</a>. It aims to be easy to setup, highly capable, and customizable.</p>
** Motivation
With my system, software, and configurations managed through GitHub ([[https://github.com/noncog/debian-autosetup][debian-autosetup]] and [[https://github.com/noncog/.dotfiles][.dotfiles]]), I required a method to backup and restore my private files. Thus, I created rofi-borg as a lean solution to have encrypted backups and a simple GUI to manage them.
** Features
*** Borg:
- *Create and Prune* backups (archives) in a repository.
- *List* archives in a repository.
- *Download* an archive from a repository.
- *Delete* an archive from a repository.
- Automatic password handling.
- Able to use borg environment variables without setting them globally in =env=.
  - Protects you from having your borg information being backed up in your dotfiles.
*** Script:
- Supports automation of backups.
  - Just call =backup_run.sh= from cron or systemd. May create template for this later.
- Supports notifications!
  - Uses your notification command of choice. Default: [[https://dunst-project.org/][Dunst]].
- Uses logging:
  - Gets info in the background and logs to files, allowing you to work while rofi-borg runs.
  - Configurable number of logs to keep.
  - Automatic pruning of logs directory.
- Easily configured:
  - Configured from main script. Settings are passed to subsequent scripts.
- Customizable:
  - Default theme is [[https://draculatheme.com/rofi][Dracula]]!
  - Each script has an associated rofi config, allowing each to be customized/themed independently.
    - =NOTE= rofi/theme configs can be made to be inherited, may add later.
- Extendable:
  - Just write a script and a rofi config file with matching names in their correct directories and add it to the =rofi-borg.sh= menu!
** Requirements
- =rofi= and =borg=
- some form of font based icons: default: Font Awesome 5

** Installation
1. Install dependencies.
2. *Reccomended Install*:
   - This install method allows you to version control rofi-borg into your rofi dotfiles, so it is available to reinstall your backups as soon as your dotfiles are installed.
     1. =cd $HOME/.config/rofi/=
     2. =git clone https://github.com/noncog/rofi-borg=
     3. configure =rofi-borg.sh= and launch using preferred method.
        - See Usage for configuration and launching methods.
** Usage
Before you can use the script, it must be configured and you need to setup a launching method.

#+HTML: <table><tr><th>:warning: WARNING</th></tr><tr><td>This script is not designed to completely setup borg backup for you. You need to have an understanding of how borg is used and have a valid repository.</td><tr/></table>

*** Configuration:
=rofi-borg= is designed to be easily configured from the top level script and the settings are passed into subsequent scripts. Configuring rofi-borg is the minimal amount of configuration required.

The options you can change in each script are clearly marked in the comments.

- rofi-borg settings:
All borg command options are set per sub-script, and rofi-borg ships with sane defaults.

If you would like to customize the behavior of the script..

**** rofi-borg
- Contains global options set for all sub-scripts
- Contains borg environment variables. Only set them here.
  - Minimally you must use:
    - BORG_REPO and setup password handling if used:
      - Either BORG_PASSPHRASE or BORG_PASSCOMMAND

**** sub-scripts


*** Launching:
- *Locally*:
  - =cd= into install director
  - =./rofi-borg.sh= or =bash rofi-borg.sh=
- *Globally*:
  - =bash $HOME/.config/rofi/rofi-borg/rofi-borg.sh=
    - If installed elsewhere supply your own file path.
  - (optional) For easy access, add the script somewhere in your $PATH.
- *From your window manager*:
- *From your custom rofi menu*:
- *From rofi combi-modi*:
  
*** Launching
**** Locally
  1. =cd= into install directory
  2. =./rofi-borg.sh= or =bash rofi-borg.sh=
**** Globally
  - =bash $HOME/.config/rofi/rofi-borg/rofi-borg.sh=
    - If installed elsewhere supply your own file path.
  - (optional) For easy access, add the script somewhere in your $PATH.
**** From window managers
**** From your custom rofi menu
**** From rofi combi-modi
** Customization
TODO
** Contributing
TODO
** WIP
- TODO change rofi config to be inheritance based so user can customize the one rofi config and the one bash script and be done. Currently, may have issues running because you don't have the font I use: Fira Code...
